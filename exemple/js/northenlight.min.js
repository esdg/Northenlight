!function(t,e){"use strict";function s(){return d(),t.addEventListener("resize",d),this}function d(){g(),u(),l()}function g(){for(var e=I(n._CANVAS_ATTR_PREFIX_),r=e.length-1;r>=0;r--)switch(h(e[r])){case i._CANVASMODE_HSTACK_:for(var a=0,o=0,p=e[r].children,_=0;_<p.length;_++)p[_].style.left=a+"px",a=Math.round(a+p[_].trueWidth),p[_].trueHeight>o&&(o=p[_].trueHeight),e[r].style.width=a+parseInt(t.getComputedStyle(e[r]).paddingLeft,10)+parseInt(t.getComputedStyle(e[r]).paddingRight,10)+"px",e[r].style.height=o+parseInt(t.getComputedStyle(e[r]).paddingBottom,10)+parseInt(t.getComputedStyle(e[r]).paddingTop,10)+"px";break;case i._CANVASMODE_VSTACK_:for(var s=0,d=0,p=e[r].children,_=0;_<p.length;_++)p[_].style.top=s+"px",s=Math.round(s+p[_].trueHeight),p[_].trueWidth>d&&(d=p[_].trueWidth),e[r].style.height=s+parseInt(t.getComputedStyle(e[r]).paddingTop,10)+parseInt(t.getComputedStyle(e[r]).paddingBottom,10)+"px",e[r].style.width=d+parseInt(t.getComputedStyle(e[r]).paddingLeft,10)+parseInt(t.getComputedStyle(e[r]).paddingRight,10)+"px"}}function u(){for(var e=I(n._VALIGN_ATTR_PREFIX_),r=e.length-1;r>=0;r--)switch(e[r].style.margin=null,m(e[r])){case o._VALIGNMODE_TOP_:e[r].style.top=parseInt(t.getComputedStyle(e[r].parentNode).paddingTop)+"px",e[r].style.bottom="auto",e[r].style.marginTop=parseInt(t.getComputedStyle(e[r]).marginTop)+"px";break;case o._VALIGNMODE_BOTTOM_:e[r].style.bottom=parseInt(t.getComputedStyle(e[r].parentNode).paddingBottom)+"px",e[r].style.top="auto",e[r].style.marginBottom=parseInt(t.getComputedStyle(e[r]).marginBottom)+"px";break;case o._VALIGNMODE_MIDDLE_:var a=parseInt(e[r].trueHeight),i=parseInt(e[r].parentNode.trueHeight);e[r].style.top=Math.round((i-a)/2)+"px",e[r].style.bottom=Math.round((i-a)/2)+"px",e[r].style.marginTop=parseInt(t.getComputedStyle(e[r]).marginTop)+"px",e[r].style.marginBottom=parseInt(t.getComputedStyle(e[r]).marginBottom)+"px"}}function l(){for(var e=I(n._HALIGN_ATTR_PREFIX_),r=e.length-1;r>=0;r--)switch(e[r].style.margin=null,A(e[r])){case p._HALIGNMODE_LEFT_:e[r].style.left=parseInt(t.getComputedStyle(e[r].parentNode).paddingLeft)+"px",e[r].style.right="auto",e[r].style.marginLeft=parseInt(t.getComputedStyle(e[r]).marginLeft)+"px";break;case p._HALIGNMODE_RIGHT_:e[r].style.right=parseInt(t.getComputedStyle(e[r].parentNode).paddingRight)+"px",e[r].style.left="auto",e[r].style.marginRight=parseInt(t.getComputedStyle(e[r]).marginRight)+"px";break;case p._HALIGNMODE_CENTER_:var a=parseInt(e[r].trueWidth),i=parseInt(e[r].parentNode.trueWidth);e[r].style.left=Math.round((i-a)/2)+"px",e[r].style.right=Math.round((i-a)/2)+"px",e[r].style.marginLeft=parseInt(t.getComputedStyle(e[r]).marginLeft)+"px",e[r].style.marginRight=parseInt(t.getComputedStyle(e[r]).marginRight)+"px"}}function I(t){for(var r=new Array,a=e.getElementsByTagName("*"),n=0;n<a.length;n++)for(var i=a[n].attributes,o=0;o<i.length;o++)i[o].name.indexOf(t)>-1&&r.push(a[n]);return r}function h(t){for(var e,r=t.attributes,a=0;a<r.length;a++)r[a].name.indexOf(n._CANVAS_ATTR_PREFIX_)>-1&&(e=r[a].value);return e}function m(e){for(var r,a=e.attributes,i=0;i<a.length;i++)if(a[i].name.indexOf(n._VALIGN_ATTR_PREFIX_)>-1){var o=a[i].name.split("_");o[1]?t.matchMedia("("+o[1]+")").matches&&(r=a[i].value):r=a[i].value}return r}function A(e){for(var r,a=e.attributes,i=0;i<a.length;i++)if(a[i].name.indexOf(n._HALIGN_ATTR_PREFIX_)>-1){var o=a[i].name.split("_");o[1]?t.matchMedia("("+o[1]+")").matches&&(r=a[i].value):r=a[i].value}return r}var _,a={get:function(){return _},init:function(t){return _||new s(t)},VERSION:"0.0.2"},n={_CANVAS_ATTR_PREFIX_:"nl-canvas",_VALIGN_ATTR_PREFIX_:"nl-valign",_HALIGN_ATTR_PREFIX_:"nl-halign"},i={_CANVASMODE_HSTACK_:"h-stack",_CANVASMODE_VSTACK_:"v-stack"},o={_VALIGNMODE_TOP_:"top",_VALIGNMODE_BOTTOM_:"bottom",_VALIGNMODE_MIDDLE_:"middle"},p={_HALIGNMODE_LEFT_:"left",_HALIGNMODE_RIGHT_:"right",_HALIGNMODE_CENTER_:"center"};"function"==typeof define&&define.amd?define([],function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:t.northenlight=a,Object.defineProperty(Element.prototype,"trueHeight",{get:function(){var e=this.clientHeight;return e+=parseInt(t.getComputedStyle(this).marginTop,10),e+=parseInt(t.getComputedStyle(this).marginBottom,10),e+=parseInt(t.getComputedStyle(this).borderTopWidth,10),e+=parseInt(t.getComputedStyle(this).borderBottomWidth,10)}}),Object.defineProperty(Element.prototype,"trueWidth",{get:function(){var e=this.clientWidth;return e+=parseInt(t.getComputedStyle(this).marginLeft,10),e+=parseInt(t.getComputedStyle(this).marginRight,10),e+=parseInt(t.getComputedStyle(this).borderLeftWidth,10),e+=parseInt(t.getComputedStyle(this).borderRightWidth,10)}}),Array.prototype.forEach||(Array.prototype.forEach=function(t){for(var e=0;e<this.length;e++)t(this[e],e,this)})}(window,document);